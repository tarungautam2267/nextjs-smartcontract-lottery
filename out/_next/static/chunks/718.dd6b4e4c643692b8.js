(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718,974,23],{42848:function(t,n,i){"use strict";i.r(n),i.d(n,{PhantomAdapter:function(){return c}});var e=i(4942),o=i(41436),s=i(44445),r=i(2043),a=i.n(r);function h(t,n,i){return new Promise(((e,o)=>{i>0?setTimeout((async()=>{const s=await t();s&&e(s),s||h(t,n,i-1).then((t=>(e(t),t))).catch((t=>o(t)))}),n):e(!1)}))}class c extends o.J5{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,e.Z)(this,"name",o.rW.PHANTOM),(0,e.Z)(this,"adapterNamespace",o.yk.SOLANA),(0,e.Z)(this,"currentChainNamespace",o.EN.SOLANA),(0,e.Z)(this,"type",o.hN.EXTERNAL),(0,e.Z)(this,"status",o.MP.NOT_READY),(0,e.Z)(this,"_wallet",null),(0,e.Z)(this,"phantomProvider",null),(0,e.Z)(this,"rehydrated",!1),(0,e.Z)(this,"_onDisconnect",(()=>{this._wallet&&(this._wallet.off("disconnect",this._onDisconnect),this.rehydrated=!1,this.status=this.status===o.MP.CONNECTED?o.MP.READY:o.MP.NOT_READY,this.emit(o.n2.DISCONNECTED))})),this.chainConfig=t.chainConfig||null}get isWalletConnected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.isConnected||this.status!==o.MP.CONNECTED)}get provider(){var t;return(null===(t=this.phantomProvider)||void 0===t?void 0:t.provider)||null}set provider(t){throw new Error("Not implemented")}setAdapterSettings(t){}async init(t){if(super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=(0,o.h2)(o.EN.SOLANA,"0x1")),this._wallet=await async function(){var t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3,count:3};if("undefined"!==typeof window&&null!==(t=window.solana)&&void 0!==t&&t.isPhantom)return window.solana;return await h((()=>{var t;return null===(t=window.solana)||void 0===t?void 0:t.isPhantom}),n.interval,n.count)?window.solana:null}({interval:500,count:3}),!this._wallet)throw o.Ty.notInstalled();this.phantomProvider=new s.PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=o.MP.READY,this.emit(o.n2.READY,o.rW.PHANTOM);try{t.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(n){a().error("Failed to connect with cached phantom provider",n),this.emit("ERRORED",n)}}async connect(){var t=this;try{if(super.checkConnectionRequirements(),this.status=o.MP.CONNECTING,this.emit(o.n2.CONNECTING,{adapter:o.rW.PHANTOM}),!this._wallet)throw o.Ty.notInstalled();if(this._wallet.isConnected)await this.connectWithProvider(this._wallet);else{const i=this._wallet._handleDisconnect;try{await new Promise(((n,e)=>{if(!this._wallet)return e(o.Ty.notInstalled());this._wallet.once("connect",(async()=>{await this.connectWithProvider(this._wallet),n(this.provider)})),this._wallet._handleDisconnect=function(){e(o.Ty.windowClosed());for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i.apply(t._wallet,s)},this._wallet.connect().catch((t=>{e(t)}))}))}catch(n){if(n instanceof o.up)throw n;throw o.RM.connectionError(null===n||void 0===n?void 0:n.message)}finally{this._wallet._handleDisconnect=i}}if(!this._wallet.publicKey)throw o.RM.connectionError();return this._wallet.on("disconnect",this._onDisconnect),this.provider}catch(n){throw this.status=o.MP.READY,this.rehydrated=!1,this.emit(o.n2.ERRORED,n),n}}async disconnect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(!this.isWalletConnected)throw o.RM.notConnectedError("Not connected with wallet");try{var n;await(null===(n=this._wallet)||void 0===n?void 0:n.disconnect()),t.cleanup&&(this.status=o.MP.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(o.n2.DISCONNECTED)}catch(i){this.emit(o.n2.ERRORED,o.RM.disconnectionError(null===i||void 0===i?void 0:i.message))}}async getUserInfo(){if(!this.isWalletConnected)throw o.RM.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async connectWithProvider(t){if(!this.phantomProvider)throw o.RM.connectionError("No phantom provider");return await this.phantomProvider.setupProvider(t),this.status=o.MP.CONNECTED,this.emit(o.n2.CONNECTED,{adapter:o.rW.PHANTOM,reconnected:this.rehydrated}),this.provider}}},11922:function(){},22399:function(){},64123:function(){},78848:function(){},71456:function(){}}]);